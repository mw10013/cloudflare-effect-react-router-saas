{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "oui-popover",
  "type": "registry:ui",
  "dependencies": [
    "react-aria-components",
    "class-variance-authority",
    "tailwind-merge"
  ],
  "registryDependencies": [
    "http://localhost:5173/r/oui-button.json",
    "http://localhost:5173/r/oui-dialog.json"
  ],
  "files": [
    {
      "path": "registry/components/ui/oui-popover.tsx",
      "content": "import { cva } from \"class-variance-authority\";\nimport * as Rac from \"react-aria-components\";\nimport { twMerge } from \"tailwind-merge\";\nimport { Button } from \"@/registry/components/ui/oui-button\";\nimport { Dialog } from \"@/registry/components/ui/oui-dialog\";\n\n/**\n * Styles for the Popover component, derived from shadcn UI's `DropdownMenuContent` and `SelectContent`.\n * React Aria Components' Popover handles the actual placement and applies essential inline styles (e.g., z-index, positioning).\n * These `popoverStyles` primarily define appearance, animations, and context-specific sizing via the `trigger` variant.\n * The `trigger` variant styles are applied based on the `trigger` render prop from React Aria Components,\n * allowing contextual styling for different trigger types like `MenuTrigger`, `Select`, or `ComboBox`.\n */\n\nconst trigger = {\n  DialogTrigger: \"min-w-72 p-4\",\n  MenuTrigger: \"\",\n  SubmenuTrigger: \"shadow-lg\",\n  Select: \"min-w-[var(--trigger-width)] p-1\",\n  ComboBox: \"min-w-[var(--trigger-width)] p-1\",\n} as const;\n\nconst placement = {\n  top: \"data-[placement=top]:slide-in-from-bottom-2\",\n  bottom: \"data-[placement=bottom]:slide-in-from-top-2\",\n  left: \"data-[placement=left]:slide-in-from-right-2\",\n  right: \"data-[placement=right]:slide-in-from-left-2\",\n} as const;\n\nexport const popoverVariants = cva(\n  [\n    \"bg-popover text-popover-foreground relative min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border shadow-md outline-none\",\n    \"data-[entering]:animate-in data-[entering]:fade-in-0 data-[entering]:zoom-in-95\",\n    \"data-[exiting]:animate-out data-[exiting]:fade-out-0 data-[exiting]:zoom-out-95\",\n  ],\n  {\n    variants: { trigger, placement },\n  },\n);\n\nfunction isPopoverVariantsTriggerKey(\n  value: unknown,\n): value is keyof typeof trigger {\n  return typeof value === \"string\" && Object.keys(trigger).includes(value);\n}\n\nfunction isPopoverVariantsPlacementKey(\n  value: unknown,\n): value is keyof typeof placement {\n  return typeof value === \"string\" && Object.keys(placement).includes(value);\n}\n\nexport function Popover({ className, offset = 4, ...props }: Rac.PopoverProps) {\n  return (\n    <Rac.Popover\n      offset={offset}\n      className={Rac.composeRenderProps(\n        className,\n        (className, { trigger, placement, ...renderProps }) =>\n          twMerge(\n            popoverVariants({\n              ...renderProps,\n              trigger: isPopoverVariantsTriggerKey(trigger)\n                ? trigger\n                : undefined,\n              placement: isPopoverVariantsPlacementKey(placement)\n                ? placement\n                : undefined,\n              className,\n            }),\n          ),\n      )}\n      {...props}\n    />\n  );\n}\n\nexport interface PopoverExProps extends Omit<Rac.PopoverProps, \"children\"> {\n  triggerElement: string | React.ReactElement;\n  dialogClassName?: string;\n  children?: Rac.DialogProps[\"children\"];\n}\n\n/**\n * A modal dialog.\n * If `triggerElement` is a string, it's rendered as a ghost `Button`.\n * The dialog is dismissable via an outside press if `role` is not \"alertdialog\".\n */\nexport function PopoverEx({\n  triggerElement,\n  dialogClassName,\n  children,\n  ...props\n}: PopoverExProps) {\n  return (\n    <Rac.DialogTrigger>\n      {typeof triggerElement === \"string\" ? (\n        <Button variant=\"ghost\">{triggerElement}</Button>\n      ) : (\n        triggerElement\n      )}\n      <Popover {...props}>\n        <Dialog className={dialogClassName} hideCloseButtonForNonAlert>\n          {children}\n        </Dialog>\n      </Popover>\n    </Rac.DialogTrigger>\n  );\n}\n",
      "type": "registry:ui"
    }
  ]
}